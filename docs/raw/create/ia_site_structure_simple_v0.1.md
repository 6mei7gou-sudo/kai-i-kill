# 総合創作系IP兼投稿サイト 構造設計（簡易）

## 1. 目的
- 公式が世界観・作品・各種プロダクト（小説/動画/VR/TRPG/PBW）を提供
- ユーザーが設定・キャラクター・怪異・武器を投稿し、世界を拡張
- 怪異は通常「公認申請不可」
- 期間限定イベント（投稿祭/投票）で公式採用を決め、公認後は「怪異記録」として公式DBに編入

---

## 2. 情報アーキテクチャ（サイトマップ）

### 2.1 公式（Official）
- 世界観
  - World Bible
  - 用語集（公開版）
- ルール
  - 投稿ガイドライン
  - TRPG/PBW 共通ルール
- 公式作品
  - 小説
  - 動画
  - VRワールド
  - TRPG
  - PBW
- 公式データベース
  - 怪異記録（KAI：公認済みのみ）
  - 公式キャラクター（任意）
  - 公式武器/装備（任意）

### 2.2 投稿（UGC）
- 怪異調査書（TMP：未公認の怪異投稿）
- 武器/装備投稿（VRC改変URL・依存アセットURL共有）
- キャラクター登録
- 設定投稿（用語/組織/場所/事件など）

### 2.3 イベント（期間限定）
- 投稿祭（怪異/武器/設定など）
- 投票
- 結果発表
- 採用アーカイブ（イベントで公認された一覧）

### 2.4 公認アーカイブ
- 公認（Canon）
- 準公認（Apocrypha）
- 由来リンク（元投稿への参照）

### 2.5 コミュニティ（最小）
- タグ検索
- お気に入り/ブックマーク
- 通報/修正提案

### 2.6 運営/GM（権限必須）
- 審査キュー（違反対応・候補選定）
- イベント管理（期間、候補化条件、投票設定）
- 公認化ツール（TMP→KAI変換、クレジット自動付与）
- 秘匿資料（GMのみ）

---

## 3. データ構造（最小コア）

### 3.1 エンティティ
- User
- Work（小説/動画/VR/TRPG/PBW）
- Character
- AnomalyDraft（怪異調査書 TMP）
- AnomalyCanon（怪異記録 KAI）
- Gear（武器/装備 + VRC改変URL群）
- Setting（用語/組織/場所/事件など）
- Tag
- Event
- Vote
- Approval（Canon/Apocrypha等の公認結果）
- Report（通報）

### 3.2 主要リレーション（例）
- User 1..* → AnomalyDraft / Gear / Character / Setting
- AnomalyCanon 1..1 → 由来 AnomalyDraft（参照リンク）
- Event 1..* → 候補（AnomalyDraft等）
- Vote *..1 → Event / User / Candidate
- Gear *..* → Character（装備リンク）
- Setting *..* → AnomalyDraft / AnomalyCanon / Character / Work（参照リンク）

---

## 4. 怪異の取り扱い（TMP→KAI）

### 4.1 原則
- ユーザーが投稿できる怪異は常設で「怪異調査書（TMP）」のみ
- 怪異の公認申請UIは存在しない（通常申請不可）

### 4.2 イベント時のみ公認ルートが開く
- イベント期間中のみ：
  - 条件達成（自動） or 運営選出（手動）で候補化
  - 投票（＋必要なら運営最終確認）
  - 採用された怪異は「怪異記録（KAI）」として新規生成
  - 元のTMPは残し、KAI側に「由来」としてリンク（クレジット含む）

---

## 5. 権限（ロール）

- Guest：閲覧のみ（公開範囲のみ）
- User：投稿/編集（自分の投稿）、投票（イベント時）
- Mod：通報対応、候補選定補助、違反是正
- Admin/GM：イベント管理、KAI生成、秘匿閲覧、最終承認

---

## 6. 最小実装の優先度（MVP）
1) World/Rule（公式ページ）  
2) 怪異調査書（TMP）投稿 + 一覧/検索（タグ）  
3) 武器投稿（VRC改変URL欄あり）  
4) キャラクター登録  
5) イベント（候補化→投票→結果）  
6) 公認（TMP→KAI変換 + 公式DB公開）  
7) 通報/モデレーション